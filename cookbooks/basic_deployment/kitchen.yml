---
driver:
  name: ec2
  aws_ssh_key_id: ssj-osaka1
  region: ap-northeast-3
  #availability_zone: us-east-1f 
  require_chef_omnibus: true
  security_group_ids: sg-02541c77ddaa65fb8
  #subnet_id: subnet-556efd59
  associate_public_ip: true
  interface: dns
  tags:
    Name: "SSJ Ec2 Instance"
    X-Contact: "sjha@progress.com"
    X-Dept: "ProductSpeciliast"
    X-TTL: "30"


provisioner:
  name: chef_zero
  product_name: chef
  install_strategy: once
  client_rb:
    chef_license: accept
    ssl_verify_peer: false
    exit_status: :enabled
    client_fork: false
    log_level: :debug
  #max_retries: 3
  #multiple_converge: 1
  # Allow reboots
  retry_on_exit: 1
  wait_for_retry: 150
  retry_on_exit_code: # An array of exit codes that can indicate that kitchen should retry the converge command. Defaults to an empty array.
        - 35          # Reboot is scheduled
  root_path: /var/tmp/kitchen
  
  

verifier:
  name: inspec

platforms:
  - name: ubuntu
    driver:
      image_id: ami-0da8d411ad1002a94

    transport:
      username: ubuntu
      ssh_key: /Users/sjha/Downloads/ssj-osaka1.pem

suites:
  - name: default
    verifier:
      inspec_tests:
        - test/integration/default  